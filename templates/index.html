{% extends 'base.html' %}

{% block title %}
Home
{% endblock %}

{% block main_content %}
<h1>Home Page</h1>

{% for thread in threads %}
    <h2>
        <a href="{{ url_for('thread', thread_id=thread['thread_id']) }}">
            {{ thread["title"] }}
        </a>
    </h2>
    <p>{{ thread["date_created"] }}, {{ thread["user_poster"] }}</p>
    {% if g.user == thread["user_poster"] %}
        <!-- I realise that this form is vulnerable to CSRF, but doing it this way is the only way I can think of that doesn't make the code messy.
        This page already has the CommentForm, adding another form seems to make things complicated.-->
        <form action="{{ url_for('delete_thread') }}" method="POST" novalidate>
            <input type="hidden" name="thread_id" value="{{ thread['thread_id'] }}" />
            <input type="submit" value="Delete" />
        </form>
    {% endif %}
{% endfor %}

{% endblock %}